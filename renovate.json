{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "lockFileMaintenance": {
    "enabled": true
  },
  "regexManagers": [
    {
      "description": "Update operator versions in API docs config",
      "fileMatch": ["^\\.api-docs-config\\.yaml$"],
      "matchStrings": [
        "repo:\\s+(?<depName>[^\\n]+)\\n\\s+version:\\s+(?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "datum-cloud/{{{depName}}}"
    },
    {
      "description": "Update datumctl documentation",
      "fileMatch": ["^\\.datumctl-docs-config\\.yaml$"],
      "matchStrings": [
        "repo:\\s+(?<depName>[^\\n]+)\\n\\s+version:\\s+(?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "datum-cloud/{{{depName}}}"
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["npm"],
      "updateLockFiles": true,
      "rangeStrategy": "bump",
      "groupName": "npm dependencies"
    },
    {
      "description": "Group API documentation operator updates together",
      "matchManagers": ["regex"],
      "matchFileNames": [".api-docs-config.yaml"],
      "groupName": "API documentation operators",
      "automerge": false,
      "reviewers": ["team:datum-cloud"],
      "schedule": ["before 3am on Monday"],
      "prBodyNotes": [
        "This PR updates the operator versions used for API documentation generation.",
        "API reference documentation will be automatically regenerated by the GitHub Actions workflow."
      ]
    },
    {
      "description": "datumctl documentation updates together",
      "matchManagers": ["regex"],
      "matchFileNames": [".datumctl-docs-config.yaml"],
      "groupName": "datumctl documentation",
      "automerge": false,
      "reviewers": ["team:datum-cloud"],
      "schedule": ["before 3am on Monday"],
      "prBodyNotes": [
        "This PR updates the datumctl documentation versions used for datumctl documentation generation.",
        "datumctl documentation will be automatically regenerated by the GitHub Actions workflow."
      ]
    }
  ]
}
