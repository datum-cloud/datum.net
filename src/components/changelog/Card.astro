---
import type { ChangelogCardProps } from '@/src/types/changelog';
import { marked } from 'marked';
export type Props = ChangelogCardProps;

const { date, title, description, tags } = Astro.props;
---

<div class="changelog-item">
  <div class="changelog-item--timeline">
    <div class="changelog-item--timeline-dot">
      <svg
        width="19"
        height="19"
        viewBox="0 0 19 19"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="9.5" cy="9.5" r="5.5" fill="#E6F59F"></circle>
        <circle opacity="0.3" cx="9.5" cy="9.5" r="9.5" fill="#E6F59F"></circle>
      </svg>
    </div>
    <div class="changelog-item--timeline-line"></div>
  </div>

  <div class="changelog-item--content">
    <div class="changelog-item--date">
      {
        date.toLocaleDateString('en-US', {
          day: 'numeric',
          month: 'long',
          year: 'numeric',
        })
      }
    </div>

    <div class="changelog-item--main">
      <h3 class="changelog-item--title">{title}</h3>
      <div class="changelog-item--description" set:html={marked.parse(description)} />

      <div class="changelog-item--tags">
        {
          tags.map((tag) => (
            <div class="changelog-item--tag-group">
              <span class={`changelog-item--tag changelog-item--tag--${tag.type}`}>
                {tag.label}
              </span>
              {tag.value && <span class="changelog-item--tag-description">{tag.value}</span>}
            </div>
          ))
        }
      </div>
    </div>
  </div>
</div>
