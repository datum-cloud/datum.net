---
import { getCollection } from 'astro:content';

const handbooks = await getCollection('handbooks');
const { currentIndex } = Astro.props;

const previousPost = currentIndex + 1 === 0 ? undefined : handbooks[currentIndex - 1];
const nextPost = currentIndex === handbooks.length - 1 ? undefined : handbooks[currentIndex + 1];

console.log(
  '\n===================================================================',
  '\ncurrentIndex: ' + currentIndex,
  '\npreviousPost: ' + previousPost?.id,
  '\nnextPost: ' + nextPost?.id,
  '\n===================================================================\n\n'
);
---

{
  (previousPost || nextPost) && (
    <nav class="mt-8 flex gap-2">
      {previousPost && (
        <a
          href={`/handbook/${previousPost.id}`}
          class="hover:bg-blackberry-200 w-full justify-start gap-2 rounded-sm border p-6"
        >
          <span class="mb-2 flex gap-2 text-xs">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-4"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"
              />
            </svg>
            <span>Previous</span>
          </span>
          <span class="block">{previousPost.data.title}</span>
        </a>
      )}
      {nextPost && (
        <a
          href={`/handbook/${nextPost.id}`}
          class="hover:bg-blackberry-200 w-full justify-end gap-2 rounded-sm border p-6 text-right"
        >
          <span class="mb-2 flex justify-end gap-2 text-xs">
            <span>Next</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-4"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"
              />
            </svg>
          </span>
          <span class="block">{nextPost.data.title}</span>
        </a>
      )}
    </nav>
  )
}
