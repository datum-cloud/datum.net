---
import Layout from '@layouts/Layout.astro';
import Hero from '@components/Hero.astro';
import Footer from '@components/Footer.astro';
import GlobalSection from '@components/GlobalSection.astro';
import BlogIndex from '@components/blog/Blog.astro';
import { getCollectionEntry } from '@utils/collectionUtils';

// Get blog landing page from blog/index.mdx
const page = await getCollectionEntry('pages', '/blog');

const icon = 'book-image';

// SEO
const fm = page.data;
const meta = fm.meta || {};
const title = meta.title ? meta.title : fm.title;
const description = meta.description ? meta.description : fm.description ? fm.description : '';
const subtitle = fm.subtitle ? fm.subtitle : 'Blog';
---

<Layout title={title || 'Datum'} description={description} bodyClass="blog-page">
  <section class="datum-container">
    <Hero class="light" iconName={icon} title={title} subtitle={subtitle} />

    <div class="section--block section--block--pad bg-navy dark">
      <BlogIndex />
    </div>

    <GlobalSection />

    <Footer />
  </section>
</Layout>
