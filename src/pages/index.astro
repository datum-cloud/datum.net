---
import { getEntries } from 'astro:content';
import Layout from '@layouts/Layout.astro';
import Hero from '@components/home/Hero.astro';
import FirstSection from '@components/home/FirstSection.astro';
import SecondSection from '@components/home/SecondSection.astro';
import GlobalSection from '@components/GlobalSection.astro';
import Footer from '@components/Footer.astro';

import { getCollectionEntry } from '@utils/collectionUtils';

const page = await getCollectionEntry('pages', '/');
const fm = page.data;
const contents = fm.contents;
const contentData = await getEntries(contents);

// SEO
const meta = fm.meta || {};
const title = fm.title ? 'Datum - ' + fm.title : 'Datum';
const description = fm.description ? fm.description : '';
---

<Layout title={title} description={description} bodyClass="home-page" meta={meta}>
  <section class="datum-container">
    <Hero class="dark" title={fm.title} description={fm.description} />

    <FirstSection content={contentData[0]} />
    <SecondSection content={contentData[1]} />
    <GlobalSection />
    <Footer />
  </section>
</Layout>
