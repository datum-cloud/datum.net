---
import Layout from '@layouts/Layout.astro';
import Hero from '@components/Hero.astro';
import Footer from '@components/Footer.astro';
import ContactForm from '@components/forms/Contact.astro';
import GlobalSection from '@components/GlobalSection.astro';
import { getCollectionEntry } from '@utils/collectionUtils';
import { render } from 'astro:content';
import { Image } from 'astro:assets';
import SceneTree from '@v1/assets/images/scene-tree.png';

const page = await getCollectionEntry('pages', 'request-access');

const { Content } = await render(page);

// SEO
const fm = page.data;
const meta = fm.meta || {};
const title = fm.title ? fm.title : 'Datum - Request Access';
const description = fm.description;
---

<Layout title={title} description={description} bodyClass={`page--${page.id}`} meta={meta}>
  <section class="datum-container">
    <Hero class="light" iconName={fm.iconName} title={title} subtitle={fm.subtitle} />

    <div class="section--block section--block--pad bg-midnight-fjord dark">
      <div class="absolute right-0 bottom-0 z-0 flex">
        <Image
          src={SceneTree}
          alt="Scene tree "
          class="h-auto w-full max-w-xl -scale-x-100 self-end"
        />
      </div>
      <div class="relative m-auto max-w-391">
        <div class="grid grid-cols-12 gap-12">
          <div class="col-span-12 md:col-span-6 lg:col-span-4">
            <div class="prose prose-xl prose-dark max-w-none leading-[1.4]">
              <Content />
            </div>
          </div>
          <div class="col-span-12 flex justify-end-safe md:col-span-6 lg:col-span-7 lg:col-start-6">
            <ContactForm title="Request Access" submitLabel="Submit" />
          </div>
        </div>
      </div>
    </div>
    <GlobalSection />
    <Footer />
  </section>
</Layout>
