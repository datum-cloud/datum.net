---
import Layout from '@v1/layouts/Layout.astro';
import Hero from '@v1/components/Hero.astro';
import Footer from '@v1/components/Footer.astro';
import Card from '@v1/components/changelog/Card.astro';
import OpenNetwork from '@v1/components/home/OpenNetwork.astro';
import type { ChangelogItem } from '@/src/types/changelog';
import { Image } from 'astro:assets';
import ImageTwoPerson from '@v1/assets/images/two-person.png';

const subtitle = 'Changelog';
const title = 'Changelog';
const icon = 'list-restart';
const description =
  'New updates and product improvements. Want to know what weâ€™re building next? Check out our Roadmap.';

const sampleData: ChangelogItem[] = [
  {
    id: '1',
    date: new Date('2025-07-30'),
    title: 'Custom OAuth scopes in the dashboard',
    description:
      'Developers can now configure custom OAuth scopes in the WorkOS Dashboard. When configured, the access token and refresh token from the OAuth provider will be passed through to your application, allowing you to access user accounts with the permissions granted. Developers can also specify additional scopes, dynamically, using the new provider_scopes query parameter. For more information, check out the documentation.',
    tags: [
      { label: 'Fixed', type: 'fixed', value: 'Bug fixes and improvements' },
      { label: 'New', type: 'new', value: 'New features added' },
      { label: 'Changed', type: 'changed', value: 'Existing features modified' },
    ],
  },
  {
    id: '2',
    date: new Date('2025-06-24'),
    title: 'Custom OAuth scopes in the dashboard',
    description:
      'Developers can now configure custom OAuth scopes in the WorkOS Dashboard. When configured, the access token and refresh token from the OAuth provider will be passed through to your application, allowing you to access user accounts with the permissions granted. Developers can also specify additional scopes, dynamically, using the new provider_scopes query parameter. For more information, check out the documentation.',
    tags: [
      { label: 'Fixed', type: 'fixed', value: 'Bug fixes and improvements' },
      { label: 'New', type: 'new', value: 'New features added' },
      { label: 'Changed', type: 'changed', value: 'Existing features modified' },
    ],
  },
  {
    id: '3',
    date: new Date('2025-07-18'),
    title: "IP changes to Datum's control plane",
    description:
      'The domains login.tailscale.com, controlplane.tailscale.com, and api.tailscale.com resolve to static IP address ranges registered and managed by Tailscale. If IP-based rules are required for your firewall, use the IPv4 range 192.200.0.0/24 and the IPv6 range 2606:B740:49::/48.',
    tags: [{ label: 'Fixed', type: 'fixed', value: 'Bug fixes and improvements' }],
  },
  {
    id: '4',
    date: new Date('2025-06-12'),
    title: "IP changes to Datum's control plane",
    description:
      'The domains login.tailscale.com, controlplane.tailscale.com, and api.tailscale.com resolve to static IP address ranges registered and managed by Tailscale. If IP-based rules are required for your firewall, use the IPv4 range 192.200.0.0/24 and the IPv6 range 2606:B740:49::/48.',
    tags: [{ label: 'Fixed', type: 'fixed', value: 'Bug fixes and improvements' }],
  },
];
---

<Layout title={title} description={description} bodyClass="about-page">
  <section class="datum-container">
    <Hero
      class="light"
      iconName={icon}
      title={title}
      description={description}
      subtitle={subtitle}
    />

    <div class="section--block section--block--pad bg-navy dark">
      <div class="changelog-container">
        {sampleData.map((item) => <Card {...item} />)}
      </div>

      <div class="absolute right-50 bottom-0 z-40 inline-block">
        <Image
          src={ImageTwoPerson}
          alt="Two Person"
          class="relative h-auto w-[179px]"
          data-scroll-effect="parallax"
          data-scroll-speed="0.1"
          data-scroll-direction="down"
          data-viewport-offset="-300"
          data-max-movement="50"
        />
      </div>
    </div>

    <OpenNetwork />

    <Footer />
  </section>
</Layout>
